CHECK AL INICIAR

SE PONE LLAVE EN CONTACTO. 
  -ESP 32 CHECK SISTEM.
    -CONTROLA SI ESTA CONECADA LA BOTONERA DE SETEO. TIENE 2 PINES UE AL CONECTAR LA BOTONERA, SE PUENTEAN. ESTE PIN MANDA GND AL SEGUNDO COMO SEÃ‘AL DE
      BOTONERA CONECTADA.
    -MUEVE EL MOTOR PASO A PASO ENTRE MIN Y MAX DE VALORES PREVIAMENTE SETEADOS
    -CONTROLA LOS VALORES ENTREGADOS EN ESTOS DOS PUNTOS POR PARTE DEL TPS DE MARIPOSA Y LOS COMPARA CON LOS VALORES SETEADOS EN CODIGO
    -EL USUARIO DEBE PISAR A FONDO EL PEDAL Y ESP 32 COMPARA VALOR DE REPOSO (MIN) Y VALOR A FONDO (MAX), CON LOS VALORES SETEADOS EN CODIGO
    -SI LOS VALORES SON CORRECTOS, PRENDE LED VERDE Y EL SISTEMA SE HABILITA.
    -SI LOS VALORES NO SON CORRECTOS, PRENDE LED ROJO Y BLOUEA EL SISTEMA.
    -EN ESTA INSTANCIA SE PUEDE CONECTAR BOTONERA DE SETEO DE VARIABLES.



ERROR AL INICIAR

TPS PEDAL = TPS1
TPS MARIPOSA  TPS2
VS = VALOR SETEADO
VM = VALOR MEDIDO

SI HAY DIFERENCIA ENTRE VS-MAX Y VM-MAX O VS-MIN Y VM-MIN. Y ESTA NO SUPERE EL 50% DEL RANGO ORIGINAL, SE PROCEDE A UNA REPROGRAMACION MOMENTANEA DEL RANGO DINAMICO, ES DECIR, SE SETEA DE MOMENTO EL NUEVO RANGO  ENTRE MIN Y MAX DE TPS2, Y TPS1, Y AVISA DE FALLA MEDIANTE LED ROJO PENDIENDO INTERMITENTEMENTE HASTA UE ESTO SE ARREGLE


EJEMPLO:

TPS1 VA DE 0-5V DE SALIDA 
VS=VM

TPS2 VA DE 0-5V DE SALIDA
VM = 0-2,5V

EN ESTE CASO, POR CADA PASO DEL TPS2, DEBE DAR 2 TPS1, PARA MANTENER LA RELACION FIJA ENTRE MIN Y MAX DE CADA UNO.
EJ: 
TPS1 =1V  =  TPS2=0,5V
TPS1 =2V  =  TPS2=1V
TPS1 =5V  =  TPS2=2,5V

MISMO SI TPS1 POSEE DIFERENCIA O AMBOS. ESTO SIEMPRE Y CUANDO LA DIFERENCIA DE RANGO EN CADA UNO NO SEA MENOR AL 50% DEL RANGO DE SETEO.
EJEMPLO
TPS1 VA DE 0-5V, POR ENDE SU RANGO ES 5, Y SU TOLERANCIA MAX DE DIFERENCIA ES 2,5, POR LO UE PARA UE LA FUNCION DE REPROGRAMACION AUTOMATICA DE RANGO DINAMICO FUNCIONE, MAX-MIN, NO DEBE SER MAYOR A 2,5.


-----------------------------------------------------------------------------------------------------------------------------------------


BOTONERA Y PROCESO DE SETEO

VARIABLES A SETEAR:
-MIN Y MAX DE TPS1
-MIN Y MAX DE TPS2
B1-B2-B3 PULSADORES
P1 - GND IN
P2 - SIGNAL (GND OUT)
CONECTO FICHA DE 7 PINES
LED 1 - PRENDIDO
ESP MANDA AL PIN 1 GND, EL PUENTE UE HACE CON PIN 2 LE DEVUELVE GND A ESP EN UNA ENTRADA, HACIENDOLE ENTENDER UE ESTA CONECADA Y DEBE ENTRAR EN MODO SETEO DE VARIABLES.
PRESIONAR B1 PARA CONFIRMAR ENTRAR MODO SETEO.
CUANDO ESP ENTIENDE UE TIENE UE MODIFICAR VARIABLES, Y ESTA LISTO, APAGA LED 1, DEJANDO TITILANDO LED 2 Y 3 (TABLERO) (VERDE Y ROJO)

SE PRESIONA B2 PARA SELECCIONAR VARIABLE TPS PEDAL, SETEANDO A LA VEZ VALOR DE REPOSO DE PEDAL (MIN)
LED 1 - TITILA INTERMITENTEMENTE Y CONFIRMA VALORES SETEADOS EN TPS PEDAL MANTENIENDOSE PRENDIDO 3S, PARA LUEGO UEDAR TITILANDO ESPERANDO EL SETEO DE VALOR MAX.
SE DEBE PISAR PEDAL A FONDO Y APRETAR NUEVAMENTE B2 PARA SETEAR VALOR MAX.
LED 1 - TITILA INTERMITENTEMENTE Y CONFIRMA VALORES SETEADOS EN TPS PEDAL MANTENIENDOSE PRENDIDO 3S, PARA LUEGO APAGARSE.

SE PRESIONA B3 PARA SELECCIONAR VARIABLE TPS MARIPOSA, SETEANDO A LA VEZ VALOR DE REPOSO DE MARIPOSA (MIN)
LED 1 - TITILA INTERMITENTEMENTE Y CONFIRMA VALORES SETEADOS EN TPS MARIPOSA MANTENIENDOSE PRENDIDO 3S, PARA LUEGO UEDAR TITILANDO ESPERANDO EL SETEO DE VALOR MAX.
SE DEBE COLOCAR MANUALMENTE LA MARIPOSA EN APERTURA MAX Y APRETAR B2 PARA SETEAR VALOR MAX.
LED 1 - TITILA INTERMITENTEMENTE Y CONFIRMA VALORES SETEADOS EN TPS MARIPOSA MANTENIENDOSE PRENDIDO 3S, PARA LUEGO APAGARSE.

PARA GUARDAR VALORES, SE DEBE APRETAR NUEVAMENTE B1, DONDE LED TITILARA 10 VECES Y SE MANTENDRA PRENDIDO 5S DE HABERSE GUARDADO TODO OK, 
DE LO CONTRARIO UEDA TITILANDO INTERMITENTEMENTE, Y EL LED.T ROJO DEL TABLERO SE UEDA PRENDIDO.

